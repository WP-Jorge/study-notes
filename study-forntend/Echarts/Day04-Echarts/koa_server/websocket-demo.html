<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<button id="connect">连接</button>
		<button id="send" disabled="true">发送数据</button><br />
		从服务端接收数据：<br />
		<span id="recv"></span>
		<script type="text/javascript">
			let connect = document.querySelector('#connect')
			let send = document.querySelector('#send')
			let recv = document.querySelector('#recv')
			let ws = null
			connect.onclick = () => {
				ws = new WebSocket('ws://localhost:9998')
				ws.onopen = () => {
					console.log('连接服务器成功')
					send.disabled = false
				}
				ws.onclose = () => {
					console.log('连接服务器失败')
					send.disabled = true
				}
				ws.onmessage = msg => {
					console.log('接收服务端发送过来的数据：' + msg)
					console.log(msg);
					recv.innerHTML = msg.data
				}
			}
			send.onclick = () => {
				ws.send(JSON.stringify({
					action: 'fullScreen',
					socketType: 'fullScreen',
					chartName: 'trend',
					value: true
				}))
			}
		</script>
	</body>
</html>
