<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<body>
		<script>
			function myNew(Fn, ...args) {
				// 1、创建一个新的空对象 obj
				let obj = {};
				// 2、给这个 obj 绑定原型
				obj.__proto__ = Fn.prototype;
				// 3、给 obj 绑定 this
				let res = Fn.apply(obj, args);
				// 返回值如果是对象，就返回该对象，否则返回 obj
				return res instanceof Object ? res : obj;
			}
			function Fn() {}
			let a = myNew(Fn);
			console.log(a.__proto__, Fn.prototype);
			Fn.prototype = {
				a: 1,
				b: 2
			};
			let b = new myNew(Fn);
			console.log(b.__proto__, Fn.prototype);

			console.log(a.a, a.b, b.a, b.b);
		</script>
	</body>
</html>
