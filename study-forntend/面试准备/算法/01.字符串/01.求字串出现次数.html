<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<body>
		<script>
			/*
			  给定两个字符串 strA 和 strB, 求 strB 在 strA 中出现的次数
			  如: strA = "aaaa"; strB = "aa"; 算作 strB 在 strA 中出现了 2 次
			 */
			function getSubNum(parentStr, childStr) {
				function getNext(childStr) {
					let j = 0;
					let next = [j];
					for (let i = 1; i < childStr.length; i++) {
						while (j && childStr[i] !== childStr[j]) {
							j = next[j - 1];
						}
						if (childStr[i] === childStr[j]) {
							j++;
						}
						next.push(j);
					}
					return next;
				}
				function strStr(parentStr, childStr) {
					let next = getNext(childStr);
					let j = 0;
					for (let i = 0; i < parentStr.length; i++) {
						while (j && parentStr[i] !== childStr[j]) {
							j = next[j - 1];
						}
						if (parentStr[i] === childStr[j]) {
							j++;
						}
						if (j === childStr.length) {
							return i - j + 1;
						}
					}
					return -1;
				}
				function getSum(parentStr, childStr) {
					let str = parentStr;
					let index = strStr(str, childStr);
					let res = 0;
					while (index !== -1) {
						res++;
						str = str.slice(index + childStr.length);
						index = strStr(str, childStr);
					}
					return res;
				}
				return getSum(parentStr, childStr);
			}
			console.log(getSubNum('aaaa', 'aa'));
		</script>
	</body>
</html>
