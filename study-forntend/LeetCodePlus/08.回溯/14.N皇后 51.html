<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<body>
		<script>
			/**
			 * @param {number} n
			 * @return {string[][]}
			 * 回溯 + 剪枝
			 */
			var solveNQueens = function (n) {
				let res = [];
				function isVaild(row, col, chessBoard, n) {
					for (let i = 0; i < row; i++) {
						if (chessBoard[i][col] === 'Q') {
							return false;
						}
					}
					for (let i = row - 1, j = col - 1; i >= 0 && j >= 0; i--, j--) {
						if (chessBoard[i][j] === 'Q') {
							return false;
						}
					}
					for (let i = row - 1, j = col + 1; i >= 0 && j < n; i--, j++) {
						if (chessBoard[i][j] === 'Q') {
							return false;
						}
					}
					return true;
				}

				function transformChessBoard(chessBoard) {
					let chessBoardBack = [];
					chessBoard.forEach(row => {
						chessBoardBack.push(row.join(''));
					});
					return chessBoardBack;
				}

				function backtracking(row, chessBoard) {
					if (row === n) {
						res.push(transformChessBoard(chessBoard));
					}
					for (let col = 0; col < n; col++) {
						if (isVaild(row, col, chessBoard, n)) {
							chessBoard[row][col] = 'Q';
							backtracking(row + 1, chessBoard);
							chessBoard[row][col] = '.';
						}
					}
				}
				let chessBoard = new Array(n).fill([]).map(() => new Array(n).fill('.'));
				backtracking(0, chessBoard);
				return res;
			};
		</script>
	</body>
</html>
