<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.boxmusic.mapper.RoleApiMapper">
<!--	<cache-ref namespace="com.example.boxmusic.mapper.RoleMapper"/>-->
<!--	<cache-ref namespace="com.example.boxmusic.mapper.ApiMapper"/>-->
<!--	<cache-ref namespace="com.example.boxmusic.mapper.RoleApiMapper"/>-->
	<cache-ref namespace="com.example.boxmusic.mapper.UserMapper"/>
	
	<!-- 通用查询映射结果 -->
	<resultMap id="BaseResultMap" type="com.example.boxmusic.pojo.entity.RoleApi">
		<id column="role_api_id" property="roleApiId"/>
		<result column="role_id" property="roleId"/>
		<result column="api_id" property="apiId"/>
		<result column="create_time" property="createTime"/>
		<result column="update_time" property="updateTime"/>
	</resultMap>
	<insert id="insertRoleApis">
		insert into role_api(role_id, api_id) values
		<foreach collection="list" item="item" index="index" separator=",">
			(#{item.roleId}, #{item.apiId})
		</foreach>
	</insert>
	
	<select id="getApisWithRoleId" resultType="com.example.boxmusic.pojo.vo.ApiVO">
		select distinct api.*
		from role_api,
			 api
		where role_api.api_id = api.api_id
		  and role_api.role_id = #{roleId}
	</select>
</mapper>
